<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Latest Screenshot</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Mobile responsive -->
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 10px;
            margin: 0;
        }
        img {
            width: 100%;
            height: auto;
            max-width: 100%;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        #meta {
            margin: 10px 0;
            font-size: 1rem;
            color: #444;
        }
    </style>
</head>
<body>
    <h1>Latest Screenshot</h1>

    {% if not has_latest %}
        <p>No screenshots found.</p>
    {% else %}
        <div id="meta">Last Modified (Eastern): {{ mtime_str }}</div>
        <img id="screenshot" src="/files/image/latest_image.png?t={{ mtime_str }}" alt="latest screenshot">
    {% endif %}

    <script>
        async function refresh() {
            try {
                const res = await fetch("/latest_meta");
                const data = await res.json();
                if (!data.exists) {
                    document.getElementById("meta").innerText = "No screenshots found.";
                    return;
                }
                document.getElementById("screenshot").src = data.url;
                document.getElementById("meta").innerText = "Last Modified (Eastern): " + data.mtime_str;
            } catch (e) {
                console.error("Refresh failed:", e);
            }
        }
        setInterval(refresh, 1000); // refresh every 1s
    </script>
</body>
</html>
